<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Pixelador # Solución # Se realiza un proceso de pixelacion utilizando el promedio del color de los pixeles de la matriz y por medio de coherencia espacial seleccionando un pixel de manera arbitraria, en este caso el primer pixel de cada sección. Finalmente se cambian todos los pixeles de la matriz por el resultado según el método de pixelacion.
La escala representa el tamaño de la matriz en pixeles. Código # Pixelador let vid; let sc = 1; let n; let slider; p5."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://compuvisual2023i.github.io/showcase/docs/Entregas/Entrega-1/Pixelator/"><title>Pixelator | Computación Visual 2023-I</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script>
<link rel=alternate type=application/rss+xml href=https://compuvisual2023i.github.io/showcase/docs/Entregas/Entrega-1/Pixelator/index.xml title="Computación Visual 2023-I"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Computación Visual 2023-I</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/showcase/docs/Julio/>Julio</a></li><li><a href=/showcase/docs/Jhon/>Jhon</a></li><li><a href=/showcase/docs/Santiago/>Santiago</a></li><li><input type=checkbox id=section-199f820c3863c09a6d11bbcf40d35372 class=toggle checked>
<label for=section-199f820c3863c09a6d11bbcf40d35372 class="flex justify-between"><a href=/showcase/docs/Entregas/>Entregas</a></label><ul><li><input type=checkbox id=section-b14f96def3329a91af37748953d8a2c0 class=toggle>
<label for=section-b14f96def3329a91af37748953d8a2c0 class="flex justify-between"><a role=button>Otro Tema</a></label><ul><li><a href=/showcase/docs/Entregas/OtroTema/Otro/>Otro</a></li></ul></li><li><input type=checkbox id=section-a9beeb45f7767fa9178e1bf3e56f8ecf class=toggle>
<label for=section-a9beeb45f7767fa9178e1bf3e56f8ecf class="flex justify-between"><a href=/showcase/docs/Entregas/Visual-Illutions/>Visual Illutions</a></label><ul><li><a href=/showcase/docs/Entregas/Visual-Illutions/App-Perlin/>App Perlin</a></li><li><a href=/showcase/docs/Entregas/Visual-Illutions/Color-Blind/>Color Blind</a><ul></ul></li><li><a href=/showcase/docs/Entregas/Visual-Illutions/Masking/>Masking</a></li><li><a href=/showcase/docs/Entregas/Visual-Illutions/Monocular-Cues/>Monocular Cues</a></li></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Pixelator</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#pixelador>Pixelador</a></li><li><a href=#solución>Solución</a></li><li><a href=#código>Código</a></li><li><a href=#conclusiones>Conclusiones</a></li><li><a href=#trabajo-futuro>Trabajo Futuro</a></li></ul></nav></aside></header><article class=markdown><h1 id=pixelador>Pixelador
<a class=anchor href=#pixelador>#</a></h1><h1 id=solución>Solución
<a class=anchor href=#soluci%c3%b3n>#</a></h1><p>Se realiza un proceso de pixelacion utilizando el promedio del color de los pixeles de la matriz y por medio de coherencia espacial seleccionando un pixel de manera arbitraria, en este caso el primer pixel de cada sección. Finalmente se cambian todos los pixeles de la matriz por el resultado según el método de pixelacion.</p><p>La escala representa el tamaño de la matriz en pixeles.
<script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script><div id=video></div><script>new p5(e=>{let n,t=1,o,s;e.preload=function(){n=e.createVideo("jellyfish.mp4")},e.setup=function(){let t=e.createCanvas(640,360),o=t.position().x,i=t.position().y;n.loop(),n.hide(),sel=e.createSelect(),sel.option("Promedio de color"),sel.option("Coherencia espacial"),sel.selected("Promedio de color"),sel.changed(mySelectEvent),sel.position(10,sel.position().y-370),s=e.createSlider(1,32,0,1),s.style("width","100px"),s.position(10,s.position().y-280)},e.draw=function(){e.background(255),e.image(n,0,0),e.loadPixels(),pixelador(),e.updatePixels(),e.textSize(28),e.fill(0,255,255),e.text("Escala "+t,10,50)},mySelectEvent=function(){s.value(1)},pixelador=function(){let a,r,c,i=0,l=0;for(t=s.value();640%t!=0;)t++;o=t*t;let d=0;if(sel.value()=="Promedio de color")for(;i<e.pixels.length;){a=0,r=0,c=0,i=l;for(let s=0;s<t;s++){for(let o=i;o<i+t*4;o+=4){if(o==(s+1)*n.width*4)break;a+=e.pixels[o],r+=e.pixels[o+1],c+=e.pixels[o+2]}i+=n.width*4}a/=o,r/=o,c/=o,i=l;for(let s=0;s<t;s++){for(let o=i;o<i+t*4;o+=4){if(o==(s+1)*n.width*4)break;e.pixels[o]=a,e.pixels[o+1]=r,e.pixels[o+2]=c}i+=n.width*4}l+=t*4}else for(;i<e.pixels.length;){a=0,r=0,c=0,d=0,i=l;for(let s=0;s<t;s++)a=e.pixels[i],r=e.pixels[i+1],c=e.pixels[i+2],i+=n.width*4;i=l;for(let s=0;s<t;s++){for(let o=i;o<i+t*4;o+=4){if(o==(s+1)*n.width*4)break;e.pixels[o]=a,e.pixels[o+1]=r,e.pixels[o+2]=c}i+=n.width*4}l+=t*4}}},"video")</script></p><h1 id=código>Código
<a class=anchor href=#c%c3%b3digo>#</a></h1><details><summary>Pixelador</summary><div class=markdown-inner><pre><code>let vid;
let sc = 1;
let n;
let slider;

p5.preload = function(){
  vid = p5.createVideo('jellyfish.mp4');
}

p5.setup = function() {

  let cnv = p5.createCanvas(640,360);     
  let x = cnv.position().x;
  let y = cnv.position().y;
  vid.loop();
  vid.hide();
  sel = p5.createSelect();
  sel.option('Promedio de color');
  sel.option('Coherencia espacial');
  sel.selected('Promedio de color');
  sel.changed(mySelectEvent);
  sel.position(10, sel.position().y - 370);
  slider = p5.createSlider(1, 32, 0,1);      
  slider.style('width', '100px'); 
  slider.position(10,slider.position().y - 280);
}

p5.draw = function(){      
  p5.background(255);
  p5.image(vid,0,0);      
  p5.loadPixels();
  pixelador();
  p5.updatePixels();
  p5.textSize(28);
  p5.fill(0, 255, 255);
  p5.text('Escala '+ sc, 10, 50);
}

mySelectEvent = function(){
  slider.value(1);      
}

pixelador = function(){
  let rp;
  let gp;
  let bp;
  let x = 0;
  let xInicial=0;
  sc = slider.value();
  while(640%sc!=0) sc++;
  n = sc*sc;
  let con = 0;
  
  if (sel.value() == 'Promedio de color')
    while(x&lt;p5.pixels.length){
      rp = 0;
      gp = 0;
      bp = 0;
      x = xInicial;

      for(let j= 0;j&lt;sc;j++){
        for(let k=x;k&lt;x+sc*4;k+=4){
          if (k==(j+1)*vid.width*4) break;
          rp += p5.pixels[k];
          gp += p5.pixels[k + 1];
          bp += p5.pixels[k + 2];
        }
        x+=vid.width*4;
      }
      rp /= n;
      gp /= n;
      bp /= n;

      x = xInicial;
      for(let j= 0;j&lt;sc;j++){
        for(let k=x;k&lt;x+sc*4 ;k+=4){
          if (k==(j+1)*vid.width*4) break;
          p5.pixels[k] = rp;
          p5.pixels[k + 1] = gp;
          p5.pixels[k + 2] = bp;
        }
        x += vid.width*4;
      }
      xInicial += sc*4;
    }
  else
    while(x&lt;p5.pixels.length){
      rp = 0;
      gp = 0;
      bp = 0;
      con = 0;
      x = xInicial;
      
      for(let j= 0;j&lt;sc;j++){
        rp = p5.pixels[x];
        gp = p5.pixels[x + 1];
        bp = p5.pixels[x + 2];
        x+=vid.width*4;
      }

      x = xInicial;
      for(let j= 0;j&lt;sc;j++){
        for(let k=x;k&lt;x+sc*4 ;k+=4){
          if (k==(j+1)*vid.width*4) break;
          p5.pixels[k] = rp;
          p5.pixels[k + 1] = gp;
          p5.pixels[k + 2] = bp;
        }
        x += vid.width*4;
      }
      xInicial += sc*4;
    } 
}
</code></pre></div></details><h1 id=conclusiones>Conclusiones
<a class=anchor href=#conclusiones>#</a></h1><p>Con el método de promedio de color obtenemos colores más suaves. Pero utilizando coherencia espacial, escogiendo un pixel de manera arbitraria, se distorsiona mas la imagen y se obtienen colores mas sólidos.</p><h1 id=trabajo-futuro>Trabajo Futuro
<a class=anchor href=#trabajo-futuro>#</a></h1><p>Es necesario optimizar el proceso del pixelador, ya que en secciones muy grandes su desempeño baja y se observa una latencia en la reproducción del mismo.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/compuvisual2023i/showcase/commit/48577dde00380d4981d3841bfcb0c4991e87e96f title='Last modified by sjgomezg | April 24, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>April 24, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#pixelador>Pixelador</a></li><li><a href=#solución>Solución</a></li><li><a href=#código>Código</a></li><li><a href=#conclusiones>Conclusiones</a></li><li><a href=#trabajo-futuro>Trabajo Futuro</a></li></ul></nav></div></aside></main></body></html>