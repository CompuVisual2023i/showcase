<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Efectos de post-procesado # Introducción # Los efectos de postprocesado son técnicas utilizadas después de tomar una fotografía o grabar un video para modificar su apariencia y mejorar su calidad visual. Estos efectos pueden incluir ajustes de color, corrección de exposición, nitidez, contraste, balance de blancos, entre otros. También se pueden aplicar filtros y efectos especiales para lograr un aspecto creativo o único en la imagen. El postprocesado permite realzar los detalles, corregir imperfecciones y añadir estilos artísticos a las imágenes, brindando una mayor flexibilidad y control sobre el resultado final."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://compuvisual2023i.github.io/showcase/docs/Entregas/Shaders/Post-Effects/"><title>Post Effects | Computación Visual 2023-I</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script>
<link rel=alternate type=application/rss+xml href=https://compuvisual2023i.github.io/showcase/docs/Entregas/Shaders/Post-Effects/index.xml title="Computación Visual 2023-I"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Computación Visual 2023-I</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/showcase/docs/Julio/>Julio</a></li><li><a href=/showcase/docs/Jhon/>Jhon</a></li><li><a href=/showcase/docs/Santiago/>Santiago</a></li><li><input type=checkbox id=section-199f820c3863c09a6d11bbcf40d35372 class=toggle checked>
<label for=section-199f820c3863c09a6d11bbcf40d35372 class="flex justify-between"><a href=/showcase/docs/Entregas/>Entregas</a></label><ul><li><input type=checkbox id=section-2ad2dee4d480516c5de1257cf349c632 class=toggle>
<label for=section-2ad2dee4d480516c5de1257cf349c632 class="flex justify-between"><a role=button>Rendering</a></label><ul><li><a href=/showcase/docs/Entregas/Rendering/Raycasting/>Raycasting</a></li></ul></li><li><input type=checkbox id=section-c13ebe2f6b2104ad5ffaadc2cf33e7b8 class=toggle checked>
<label for=section-c13ebe2f6b2104ad5ffaadc2cf33e7b8 class="flex justify-between"><a role=button>Shaders</a></label><ul><li><a href=/showcase/docs/Entregas/Shaders/coloring/>Coloring</a></li><li><a href=/showcase/docs/Entregas/Shaders/Photomosaic/>Photomosaic</a><ul></ul></li><li><a href=/showcase/docs/Entregas/Shaders/Post-Effects/ class=active>Post Effects</a><ul></ul></li><li><a href=/showcase/docs/Entregas/Shaders/Texturing/>Texturing</a><ul></ul></li></ul></li><li><input type=checkbox id=section-1cc6dfbd46c87df6b3270c50e2c0f6a0 class=toggle>
<label for=section-1cc6dfbd46c87df6b3270c50e2c0f6a0 class="flex justify-between"><a role=button>Transformations</a></label><ul><li><a href=/showcase/docs/Entregas/Transformations/game/>Game</a></li></ul></li><li><input type=checkbox id=section-a9beeb45f7767fa9178e1bf3e56f8ecf class=toggle>
<label for=section-a9beeb45f7767fa9178e1bf3e56f8ecf class="flex justify-between"><a href=/showcase/docs/Entregas/Visual-Illutions/>Visual Illutions</a></label><ul><li><a href=/showcase/docs/Entregas/Visual-Illutions/App-Perlin/>App Perlin</a></li><li><a href=/showcase/docs/Entregas/Visual-Illutions/Color-Blind/>Color Blind</a><ul></ul></li><li><a href=/showcase/docs/Entregas/Visual-Illutions/Masking/>Masking</a></li><li><a href=/showcase/docs/Entregas/Visual-Illutions/Monocular-Cues/>Monocular Cues</a></li><li><a href=/showcase/docs/Entregas/Visual-Illutions/Pixelador/>Pixelador</a><ul></ul></li></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Post Effects</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#efectos-de-post-procesado>Efectos de post-procesado</a></li><li><a href=#introducción>Introducción</a></li><li><a href=#antecedentes-y-trabajo-previo>Antecedentes y trabajo previo</a><ul><li><a href=#blur>Blur</a></li><li><a href=#inversion-de-colores>Inversion de colores</a></li><li><a href=#filtro-anaglifo>Filtro anaglifo</a></li></ul></li><li><a href=#solución>Solución</a><ul><li><a href=#resultado>Resultado</a></li></ul></li><li><a href=#código>Código</a></li><li><a href=#conclusiones>Conclusiones</a></li><li><a href=#trabajo-futuro>Trabajo Futuro</a></li></ul></nav></aside></header><article class=markdown><h1 id=efectos-de-post-procesado>Efectos de post-procesado
<a class=anchor href=#efectos-de-post-procesado>#</a></h1><h1 id=introducción>Introducción
<a class=anchor href=#introducci%c3%b3n>#</a></h1><p>Los efectos de postprocesado son técnicas utilizadas después de tomar una fotografía o grabar un video para modificar su apariencia y mejorar su calidad visual. Estos efectos pueden incluir ajustes de color, corrección de exposición, nitidez, contraste, balance de blancos, entre otros. También se pueden aplicar filtros y efectos especiales para lograr un aspecto creativo o único en la imagen. El postprocesado permite realzar los detalles, corregir imperfecciones y añadir estilos artísticos a las imágenes, brindando una mayor flexibilidad y control sobre el resultado final. Además, el postprocesado puede adaptarse a diferentes plataformas y formatos, optimizando las imágenes para su uso en medios digitales, impresiones, presentaciones o publicaciones en redes sociales. En resumen, los efectos de postprocesado son herramientas y técnicas utilizadas para mejorar y personalizar las imágenes y los videos, proporcionando ajustes de color, nitidez y efectos especiales para lograr una apariencia visualmente atractiva y profesional.</p><h1 id=antecedentes-y-trabajo-previo>Antecedentes y trabajo previo
<a class=anchor href=#antecedentes-y-trabajo-previo>#</a></h1><h2 id=blur>Blur
<a class=anchor href=#blur>#</a></h2><p>El efecto &ldquo;blur&rdquo; (desenfoque en inglés) es un término utilizado en fotografía, diseño gráfico y procesamiento de imágenes para describir la apariencia borrosa o suave de una imagen. El desenfoque se produce cuando los detalles finos de una imagen se difuminan o difuminan, lo que resulta en una pérdida de nitidez y claridad.</p><p>El efecto de desenfoque también se puede aplicar en el procesamiento de imágenes digitales para varios propósitos. Por ejemplo, puede ayudar a reducir el ruido o eliminar detalles no deseados en una imagen. También se puede utilizar para simular la profundidad de campo en una imagen, donde un área específica está enfocada y el resto se encuentra borroso.</p><h2 id=inversion-de-colores>Inversion de colores
<a class=anchor href=#inversion-de-colores>#</a></h2><p>La inversión de colores es un proceso en el que se cambian los valores de color de una imagen de manera que los colores opuestos en el espectro se intercambien. Por ejemplo, los tonos oscuros se vuelven claros y los tonos claros se vuelven oscuros. Esto se logra mediante la inversión de los valores de cada componente de color (rojo, verde y azul) de cada píxel de la imagen.</p><p>La inversión de colores es un proceso en el que se intercambian los valores de color de una imagen, creando un efecto visual diferente. Puede utilizarse con fines creativos en el diseño gráfico, el arte digital y la publicidad, así como para mejorar la accesibilidad visual y ayudar a personas con dificultades para distinguir ciertos colores.</p><h2 id=filtro-anaglifo>Filtro anaglifo
<a class=anchor href=#filtro-anaglifo>#</a></h2><p>El filtro anaglifo es una técnica utilizada en el procesamiento de imágenes para crear efectos tridimensionales. Consiste en combinar dos imágenes con una ligera diferencia de perspectiva en los colores rojo y cian. Al observar la imagen resultante con gafas anaglifo, que tienen lentes de colores correspondientes, se crea la ilusión de profundidad y se logra una experiencia tridimensional. Este filtro se utiliza comúnmente en fotografía, cine y videojuegos para proporcionar efectos de inmersión y realismo. El anaglifo ofrece una forma económica y accesible de experimentar la visualización en 3D sin requerir equipos especializados.</p><h1 id=solución>Solución
<a class=anchor href=#soluci%c3%b3n>#</a></h1><div class=book-tabs><input type=radio class=toggle name=tabs-uniqueid id=tabs-uniqueid-0 checked>
<label for=tabs-uniqueid-0>Blur</label><div class="book-tabs-content markdown-inner"><h2 id=blur>Blur
<a class=anchor href=#blur>#</a></h2><p>la función gaussianBlur, es la encargada de tomar cada texel y aplicar un proceso de ponderación, dado los dos vectores, gWeights y gOffsets, y recorriendo los texeles vecinos con el gOffsets y aplicando la el efecto blur con el gWeights.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>gaussianBlur</span>( <span style=color:#a6e22e>sampler2D</span> <span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>texUV</span>, <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>stepSize</span> ){   
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>colOut</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec3</span>( <span style=color:#ae81ff>0.0</span> );                                                                                                                                   
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>stepCount</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>9</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>float</span> <span style=color:#a6e22e>gWeights</span>[<span style=color:#a6e22e>stepCount</span>];
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gWeights</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.10855</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gWeights</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.13135</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gWeights</span>[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.10406</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gWeights</span>[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.07216</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gWeights</span>[<span style=color:#ae81ff>4</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.04380</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gWeights</span>[<span style=color:#ae81ff>5</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.02328</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gWeights</span>[<span style=color:#ae81ff>6</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.01083</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gWeights</span>[<span style=color:#ae81ff>7</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.00441</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gWeights</span>[<span style=color:#ae81ff>8</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.00157</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>float</span> <span style=color:#a6e22e>gOffsets</span>[<span style=color:#a6e22e>stepCount</span>];
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gOffsets</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.66293</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gOffsets</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>2.47904</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gOffsets</span>[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>4.46232</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gOffsets</span>[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>6.44568</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gOffsets</span>[<span style=color:#ae81ff>4</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>8.42917</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gOffsets</span>[<span style=color:#ae81ff>5</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>10.41281</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gOffsets</span>[<span style=color:#ae81ff>6</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>12.39664</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gOffsets</span>[<span style=color:#ae81ff>7</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>14.38070</span>;
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>gOffsets</span>[<span style=color:#ae81ff>8</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>16.36501</span>;
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span>( <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>stepCount</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> ){  
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>texCoordOffset</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>gOffsets</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>stepSize</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>( <span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>texUV</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>texCoordOffset</span> ).<span style=color:#a6e22e>xyz</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>texture2D</span>( <span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>texUV</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>texCoordOffset</span> ).<span style=color:#a6e22e>xyz</span>; 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>col</span> <span style=color:#f92672>*=</span> <span style=color:#a6e22e>gWeights</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>colOut</span> <span style=color:#f92672>+=</span>  <span style=color:#a6e22e>col</span>;                                                                                                                               
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>colOut</span>;                                                                                                                                                   
</span></span><span style=display:flex><span>} 
</span></span></code></pre></div></div><input type=radio class=toggle name=tabs-uniqueid id=tabs-uniqueid-1>
<label for=tabs-uniqueid-1>Inversion de colores</label><div class="book-tabs-content markdown-inner"><h2 id=inversion-de-colores>Inversion de colores
<a class=anchor href=#inversion-de-colores>#</a></h2><p>Para poder solucionar este, extraemos el color de cada texel en el shader, y como este trabaja con valores de 0 a 1, y a 1 le restamos el valor de RGB del texel.</p><p>Normalizamos las coordenadas:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>st</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#a6e22e>gl_FragCoord</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>uResolution</span>.<span style=color:#a6e22e>x</span>, <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>gl_FragCoord</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>uResolution</span>.<span style=color:#a6e22e>y</span>);
</span></span></code></pre></div><p>Obtenemos el texel:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>color</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>uTexture</span>, <span style=color:#a6e22e>st</span>);
</span></span></code></pre></div><p>Invertimos el color:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>color</span>.<span style=color:#a6e22e>rgb</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>color</span>.<span style=color:#a6e22e>rgb</span>;
</span></span></code></pre></div><p>Aplicamos el color al shader:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>;
</span></span></code></pre></div></div><input type=radio class=toggle name=tabs-uniqueid id=tabs-uniqueid-2>
<label for=tabs-uniqueid-2>Filtro anaglifo</label><div class="book-tabs-content markdown-inner"><h2 id=filtro-anaglifo>Filtro anaglifo
<a class=anchor href=#filtro-anaglifo>#</a></h2><p>Normalizamos las coordenadas y las desplazamos a la izquierda:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>st</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec2</span>((<span style=color:#a6e22e>gl_FragCoord</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>uResolution</span>.<span style=color:#a6e22e>x</span>)<span style=color:#f92672>-</span><span style=color:#ae81ff>0.02</span>, <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>gl_FragCoord</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>uResolution</span>.<span style=color:#a6e22e>y</span>);
</span></span></code></pre></div><p>Aplicamos estas coordenadas a la textura para la capa roja:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>uTexture</span>, <span style=color:#a6e22e>st</span>);
</span></span></code></pre></div><p>Normalizamos las coordenadas y las desplazamos a la derecha:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>st2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec2</span>((<span style=color:#a6e22e>gl_FragCoord</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>uResolution</span>.<span style=color:#a6e22e>x</span>)<span style=color:#f92672>+</span><span style=color:#ae81ff>0.02</span>, <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>gl_FragCoord</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>uResolution</span>.<span style=color:#a6e22e>y</span>);
</span></span></code></pre></div><p>Aplicamos estas coordenadas a la textura para la capa azul y verde:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>gb</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>uTexture</span>, <span style=color:#a6e22e>st2</span>);
</span></span></code></pre></div><p>Aplicamos las capas anteriores al color del shader:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>gb</span>.<span style=color:#a6e22e>g</span>, <span style=color:#a6e22e>gb</span>.<span style=color:#a6e22e>b</span>, <span style=color:#ae81ff>1.0</span>);
</span></span></code></pre></div></div></div><h2 id=resultado>Resultado
<a class=anchor href=#resultado>#</a></h2><p>Hacer Click en la imagen para cambiar el efecto.</p><ol><li>Blur</li><li>Invertir colores</li><li>Filtro Anaglifo</li></ol><center><iframe id=breath style=width:535px;height:430px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script>
              

    //Blur
    let pg_1, pg_2;
    let shader_1, shader_2;

    //Invertir colores
    let pg_3;
    let shader_3;

    //filtro anglifico
    let pg_4;
    let shader_4;

    let s = 0;

    let img;

    function preload() {
        shader_1 = loadShader('shader.vert','shader.frag');
        shader_2 = loadShader('shader.vert','shader.frag');   
        shader_3 = loadShader('shader_ic.vert','shader_ic.frag');
        shader_4 = loadShader('shader_ang.vert','shader_ang.frag');
        img = loadImage('ne.jpg');
    }

    function setup() {
        createCanvas(512, 405);
        pg_1 = createGraphics(width, height, WEBGL);
        pg_2 = createGraphics(width, height, WEBGL);
        pg_3 = createGraphics(width, height, WEBGL);
        pg_4 = createGraphics(width, height, WEBGL);
        

        pg_1.shader(shader_1);
        pg_2.shader(shader_2);
        pg_3.shader(shader_3);
        pg_4.shader(shader_4);
        
        
    }



    function draw() {
        if (s==1){
            shader_1.setUniform(&#34;tex&#34;, img);
            shader_1.setUniform(&#34;resolution&#34;, [width, height]);
            shader_1.setUniform(&#34;direction&#34;, [1.5, 0]);

            pg_1.rect(0, 0, width, height);

            shader_2.setUniform(&#34;tex&#34;, pg_1);
            shader_2.setUniform(&#34;resolution&#34;, [width, height]);
            shader_2.setUniform(&#34;direction&#34;, [0, 1.5]);
            
            pg_2.rect(0, 0, width, height);

            image(pg_2, 0, 0);
            textSize(32);
            text(s, 10, 30);
        }
        else if(s==2){

            shader_3.setUniform(&#34;uResolution&#34;, [width, height]);
            shader_3.setUniform(&#34;uTexture&#34;, img);
            pg_3.texture(img);
            pg_3.beginShape();
            pg_3.vertex(-width / 2, height / 2, 0, 1);
            pg_3.vertex(width / 2, height / 2, 1, 1);
            pg_3.vertex(width / 2, -height / 2, 1, 0);            
            pg_3.vertex(-width / 2, -height / 2, 0, 0);            
            pg_3.endShape(CLOSE);
            image(pg_3, 0, 0);
            textSize(32);
            text(s, 10, 30);

        } 
        else if(s==3){

            shader_4.setUniform(&#34;uResolution&#34;, [width, height]);
            shader_4.setUniform(&#34;uTexture&#34;, img);
            pg_4.texture(img);
            pg_4.beginShape();
            pg_4.vertex(-width / 2, height / 2, 0, 1);
            pg_4.vertex(width / 2, height / 2, 1, 1);
            pg_4.vertex(width / 2, -height / 2, 1, 0);            
            pg_4.vertex(-width / 2, -height / 2, 0, 0);            
            pg_4.endShape(CLOSE);
            image(pg_4, 0, 0);
            textSize(32);
            text(s, 10, 30);

        }
        else{
           image(img, 0, 0); 
           textSize(32);
           fill(255);
            text('Original', 10, 30);
        }
        
    }

    function mousePressed(){
        if(s<3) s++;
        else s=0;
    }


            </script>
          </head>
          <body>
          </body>
        </html>
      "></iframe></center><h1 id=código>Código
<a class=anchor href=#c%c3%b3digo>#</a></h1><details><summary>Código general</summary><div class=markdown-inner><pre><code>//Blur
let pg_1, pg_2;
let shader_1, shader_2;

//Invertir colores
let pg_3;
let shader_3;

//filtro anglifico
let pg_4;
let shader_4;

let s = 0;

let img;

function preload() {
    shader_1 = loadShader('shader.vert','shader.frag');
    shader_2 = loadShader('shader.vert','shader.frag');   
    shader_3 = loadShader('shader_ic.vert','shader_ic.frag');
    shader_4 = loadShader('shader_ang.vert','shader_ang.frag');
    img = loadImage('ne.jpg');
}

function setup() {
    createCanvas(512, 405);
    pg_1 = createGraphics(width, height, WEBGL);
    pg_2 = createGraphics(width, height, WEBGL);
    pg_3 = createGraphics(width, height, WEBGL);
    pg_4 = createGraphics(width, height, WEBGL);
    

    pg_1.shader(shader_1);
    pg_2.shader(shader_2);
    pg_3.shader(shader_3);
    pg_4.shader(shader_4);
    
    
}



function draw() {
    if (s==1){
        shader_1.setUniform(&quot;tex&quot;, img);
        shader_1.setUniform(&quot;resolution&quot;, [width, height]);
        shader_1.setUniform(&quot;direction&quot;, [1.5, 0]);

        pg_1.rect(0, 0, width, height);

        shader_2.setUniform(&quot;tex&quot;, pg_1);
        shader_2.setUniform(&quot;resolution&quot;, [width, height]);
        shader_2.setUniform(&quot;direction&quot;, [0, 1.5]);
        
        pg_2.rect(0, 0, width, height);

        image(pg_2, 0, 0);
        textSize(32);
        text(s, 10, 30);
    }
    else if(s==2){

        shader_3.setUniform(&quot;uResolution&quot;, [width, height]);
        shader_3.setUniform(&quot;uTexture&quot;, img);
        pg_3.texture(img);
        pg_3.beginShape();
        pg_3.vertex(-width / 2, height / 2, 0, 1);
        pg_3.vertex(width / 2, height / 2, 1, 1);
        pg_3.vertex(width / 2, -height / 2, 1, 0);            
        pg_3.vertex(-width / 2, -height / 2, 0, 0);            
        pg_3.endShape(CLOSE);
        image(pg_3, 0, 0);
        textSize(32);
        text(s, 10, 30);

    } 
    else if(s==3){

        shader_4.setUniform(&quot;uResolution&quot;, [width, height]);
        shader_4.setUniform(&quot;uTexture&quot;, img);
        pg_4.texture(img);
        pg_4.beginShape();
        pg_4.vertex(-width / 2, height / 2, 0, 1);
        pg_4.vertex(width / 2, height / 2, 1, 1);
        pg_4.vertex(width / 2, -height / 2, 1, 0);            
        pg_4.vertex(-width / 2, -height / 2, 0, 0);            
        pg_4.endShape(CLOSE);
        image(pg_4, 0, 0);
        textSize(32);
        text(s, 10, 30);

    }
    else{
       image(img, 0, 0); 
       textSize(32);
       fill(255);
        text('Original', 10, 30);
    }
    
}

function mousePressed(){
    if(s&lt;3) s++;
    else s=0;
}
</code></pre></div></details><details><summary>Código shader frag Blur</summary><div class=markdown-inner><pre><code>precision mediump float;

varying vec2 vTexCoord;
uniform sampler2D tex;
uniform vec2 resolution;
uniform vec2 direction;

vec3 gaussianBlur( sampler2D t, vec2 texUV, vec2 stepSize ){   
vec3 colOut = vec3( 0.0 );                                                                                                                                   

const int stepCount = 9;

float gWeights[stepCount];
    gWeights[0] = 0.10855;
    gWeights[1] = 0.13135;
    gWeights[2] = 0.10406;
    gWeights[3] = 0.07216;
    gWeights[4] = 0.04380;
    gWeights[5] = 0.02328;
    gWeights[6] = 0.01083;
    gWeights[7] = 0.00441;
    gWeights[8] = 0.00157;

float gOffsets[stepCount];
    gOffsets[0] = 0.66293;
    gOffsets[1] = 2.47904;
    gOffsets[2] = 4.46232;
    gOffsets[3] = 6.44568;
    gOffsets[4] = 8.42917;
    gOffsets[5] = 10.41281;
    gOffsets[6] = 12.39664;
    gOffsets[7] = 14.38070;
    gOffsets[8] = 16.36501;

for( int i = 0; i &lt; stepCount; i++ ){  

	vec2 texCoordOffset = gOffsets[i] * stepSize;

	vec3 col = texture2D( t, texUV + texCoordOffset ).xyz + texture2D( t, texUV - texCoordOffset ).xyz; 

	col *= gWeights[i];

	colOut +=  col;                                                                                                                               
}

return colOut;                                                                                                                                                   
} 

void main() {

vec2 uv = vTexCoord;
uv.y = 1.0 - uv.y;

vec2 texel = 1.0 / resolution;
vec2 stepSize = texel * direction;

vec3 blur = gaussianBlur(tex, uv, stepSize);

gl_FragColor = vec4(blur, 1.0);

}
</code></pre></div></details><details><summary>Código shader frag Inversion de colores</summary><div class=markdown-inner><pre><code>precision mediump float;

uniform vec2 uResolution;
uniform sampler2D uTexture;


void main() {
vec2 st = vec2(gl_FragCoord.x / uResolution.x, 1.0 - gl_FragCoord.y / uResolution.y);
vec4 color = texture2D(uTexture, st);
color.rgb = 1.0 - color.rgb; // Invertir los colores
gl_FragColor = color;
}
</code></pre></div></details><details><summary>Código shader frag filtro anaglifo</summary><div class=markdown-inner><pre><code>precision mediump float;

uniform vec2 uResolution;

uniform sampler2D uTexture;

void main() {
vec2 st = vec2((gl_FragCoord.x / uResolution.x)-0.02, 1.0 - gl_FragCoord.y / uResolution.y);
vec4 r = texture2D(uTexture, st);
vec2 st2 = vec2((gl_FragCoord.x / uResolution.x)+0.02, 1.0 - gl_FragCoord.y / uResolution.y);
vec4 gb = texture2D(uTexture, st2);
gl_FragColor = vec4(r.r, gb.g, gb.b, 1.0);
}
</code></pre></div></details><h1 id=conclusiones>Conclusiones
<a class=anchor href=#conclusiones>#</a></h1><p>Los efectos de postprocesado junto con el uso de shaders, son una herramienta bastante util para poder manipular las imágenes en tiempo real y con un tiempo de procesamiento bastante reducido.</p><h1 id=trabajo-futuro>Trabajo Futuro
<a class=anchor href=#trabajo-futuro>#</a></h1><p>Es necesario ajustar el filtro anaglifo ya que al realizar el desplazamiento de las capas de color, estas generan unos bordes indeseados, donde se al parecer la ultima linea de pixeles se replica para rellenar el espacio de trabajo.</p><p>También seria interesante aplicar estos efectos a videos con el fin de analizar su rendimiento y poder observar el uso de cada filtro de una mejor manera.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/compuvisual2023i/showcase/commit/1b8e41ae837f250f0f57177ad6404e3c9078f8bb title='Last modified by sjgomezg | June 19, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 19, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#efectos-de-post-procesado>Efectos de post-procesado</a></li><li><a href=#introducción>Introducción</a></li><li><a href=#antecedentes-y-trabajo-previo>Antecedentes y trabajo previo</a><ul><li><a href=#blur>Blur</a></li><li><a href=#inversion-de-colores>Inversion de colores</a></li><li><a href=#filtro-anaglifo>Filtro anaglifo</a></li></ul></li><li><a href=#solución>Solución</a><ul><li><a href=#resultado>Resultado</a></li></ul></li><li><a href=#código>Código</a></li><li><a href=#conclusiones>Conclusiones</a></li><li><a href=#trabajo-futuro>Trabajo Futuro</a></li></ul></nav></div></aside></main></body></html>